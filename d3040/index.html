<!DOCTYPE html>
<html>
  <head>
    <title>Dawson 3040</title>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.no-icons.min.css">
    <link rel="stylesheet" href="//netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.min.css">

    <style>
      textarea { font-family: monospace; }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="page-header">
        <div class="pull-right">
          <a class="btn btn-primary"
             href="https://github.com/programble/junk/tree/gh-pages/d3040">
            <i class="icon-github"></i> GitHub
          </a>
        </div>
        <h1>Dawson 3040</h1>
      </div>

      <ul class="nav nav-tabs">
        <li class="active"><a href="#emulator" data-toggle="tab">Emulator</a></li>
        <li><a href="#specification" data-toggle="tab">Specification</a></li>
      </ul>

      <div class="tab-content">
        <div id="emulator" class="tab-pane active">
          <div class="alert alert-danger fade in hidden">
            <button type="button" class="close" data-dismiss="alert">Ã—</button>
            <strong>Error:</strong>
            <span></span>
          </div>

          <div class="row">
            <div class="col-md-6">
              <h3>Input</h3>

              <form class="form-horizontal">
                <div class="form-group">
                  <label for="inip" class="col-md-4 control-label">Instruction Pointer</label>
                  <div class="col-md-8">
                    <input type="number" id="inip" class="form-control" value="0">
                  </div>
                </div>

                <div class="form-group">
                  <label for="ina" class="col-md-4 control-label">Accumulator</label>
                  <div class="col-md-8">
                    <input type="number" id="ina" class="form-control" value="26">
                  </div>
                </div>

                <div class="form-group">
                  <label for="inr1" class="col-md-4 control-label">R1</label>
                  <div class="col-md-8">
                    <input type="number" id="inr1" class="form-control" value="9">
                  </div>
                </div>

                <div class="form-group">
                  <label for="inr2" class="col-md-4 control-label">R2</label>
                  <div class="col-md-8">
                    <input type="number" id="inr2" class="form-control" value="1">
                  </div>
                </div>

                <div class="form-group">
                  <label for="inr3" class="col-md-4 control-label">R3</label>
                  <div class="col-md-8">
                    <input type="number" id="inr3" class="form-control" value="2">
                  </div>
                </div>
              </form>

              <h4>Code</h4>
              <textarea id="incode" class="form-control" rows="16" spellcheck="false">
CLA
MAM M22
MMR M20 R1
MMR M21 R2
MMR M22 R3
DIV R1  R2
MAM M20
INC R3
MRA R3
MAM M22
MMR M20 R1
MMR M24 R3
CMP R1  R3
JPZ M5
HLT</textarea>

              <h4>Data</h4>
              <textarea id="indata" class="form-control" rows="6" spellcheck="false">
M20 16
M21 2
M22 5
M23 6
M24 1</textarea>
            </div>

            <div class="col-md-6">
              <h3>Output</h3>

              <button type="button" id="reset" class="btn btn-danger">Reset</button>
              <button type="button" id="step" class="btn btn-default">Step</button>
              <button type="button" id="run" class="btn btn-primary">Run</button>

              <dl class="dl-horizontal">
                <dt>Instruction Pointer</dt> <dd id="outip"></dd>
                <dt>Accumulator</dt> <dd id="outa"></dd>
                <dt>R1</dt> <dd id="outr1"></dd>
                <dt>R2</dt> <dd id="outr2"></dd>
                <dt>R3</dt> <dd id="outr3"></dd>
              </dl>

              <h4>Data</h4>
              <dl id="outdata" class="dl-horizontal">
              </dl>
            </div>
          </div>
        </div>

        <div id="specification" class="tab-pane">
          <div class="row">
            <div class="col-sm-2">
              <h4>Control Unit</h4>
              <ul class="list-unstyled">
                <li>Instruction Pointer</li>
                <li>Instruction Register</li>
              </ul>
            </div>

            <div class="col-sm-2">
              <h4>Registers</h4>
              <ul class="list-unstyled">
                <li>Accumulator</li>
                <li>R1</li>
                <li>R2</li>
                <li>R3</li>
              </ul>
            </div>
          </div>

          <div class="table-responsive">
            <table class="table">
              <thead>
                <tr>
                  <th>Opcode</th>
                  <th colspan="2">Operands</th>
                  <th>Operation</th>
                  <th>Example</th>
                </tr>
              </thead>

              <tbody>
              <tr>
                <td><code>INP</code></td>
                <td><code>VAL</code></td>
                <td><code>MEM</code></td>
                <td>
                  Input the given value into the given memory address
                </td>
                <td><code>INP 7 M1</code></td>
              </tr>

              <tr>
                <td><code>CLA</code></td>
                <td></td>
                <td></td>
                <td>
                  Clear the accumulator to 0
                </td>
                <td><code>CLA</code></td>
              </tr>

              <tr>
                <td><code>MAM</code></td>
                <td><code>MEM</code></td>
                <td></td>
                <td>
                  Move the value from the accumulator to the given memory
                  location
                </td>
                <td><code>MAM M6</code></td>
              </tr>

              <tr>
                <td><code>MMR</code></td>
                <td><code>MEM</code></td>
                <td><code>REG</code></td>
                <td>
                  Move the value from the given memory location to the given
                  register
                </td>
                <td><code>MMR M1 R1</code></td>
              </tr>

              <tr>
                <td><code>MRA</code></td>
                <td><code>REG</code></td>
                <td></td>
                <td>
                  Move the value from the given register to the accumulator
                </td>
                <td><code>MRA R3</code></td>
              </tr>

              <tr>
                <td><code>MAR</code></td>
                <td><code>REG</code></td>
                <td></td>
                <td>
                  Move the value from the accumulator to the given register
                </td>
                <td><code>MAR R1</code></td>
              </tr>

              <tr>
                <td><code>ADD</code></td>
                <td><code>REG</code></td>
                <td><code>REG</code></td>
                <td>
                  Add the values in the two given registers, put result in
                  accumulator
                </td>
                <td><code>ADD R1 R2</code></td>
              </tr>

              <tr>
                <td><code>SUB</code></td>
                <td><code>REG</code></td>
                <td><code>REG</code></td>
                <td>
                  Subtract the value in the second register from the value in
                  the first register and place the result in the accumulator
                </td>
                <td><code>SUB R1 R2</code></td>
              </tr>

              <tr>
                <td><code>MUL</code></td>
                <td><code>REG</code></td>
                <td><code>REG</code></td>
                <td>
                  Multiply the values in the given registers, put result in
                  accumulator
                </td>
                <td><code>MUL R1 R2</code></td>
              </tr>

              <tr>
                <td><code>DIV</code></td>
                <td><code>REG</code></td>
                <td><code>REG</code></td>
                <td>
                  Divide the value in the first register by the value in the
                  second register and place the result in the accumulator
                </td>
                <td><code>DIV R1 R2</code></td>
              </tr>

              <tr>
                <td><code>INC</code></td>
                <td><code>REG</code></td>
                <td></td>
                <td>
                  Increment the given register by 1
                </td>
                <td><code>INC R1</code></td>
              </tr>

              <tr>
                <td><code>DEC</code></td>
                <td><code>REG</code></td>
                <td></td>
                <td>
                  Decrement the given register by 1
                </td>
                <td><code>DEC R2</code></td>
              </tr>

              <tr>
                <td><code>CMP</code></td>
                <td><code>REG</code></td>
                <td><code>REG</code></td>
                <td>
                  Compare the values in two given registers; if the values are
                  equal, store 1 in the accumulator, otherwise store 0 in the
                  accumulator
                </td>
                <td><code>CMP R1 R2</code></td>
              </tr>

              <tr>
                <td><code>JMP</code></td>
                <td><code>MEM</code></td>
                <td></td>
                <td>
                  Jump to the instruction at the given memory address
                </td>
                <td><code>JMP M26</code></td>
              </tr>

              <tr>
                <td><code>JPZ</code></td>
                <td><code>MEM</code></td>
                <td></td>
                <td>
                  Jump to the instruction at the given memory address only if
                  the accumulator holds a 0
                </td>
                <td><code>JPZ M24</code></td>
              </tr>

              <tr>
                <td><code>JPN</code></td>
                <td><code>MEM</code></td>
                <td></td>
                <td>
                  Jump to the instruction at the given memory address only if
                  the accumulator does not hold a 0
                </td>
                <td><code>JPN M12</code></td>
              </tr>

              <tr>
                <td><code>HLT</code></td>
                <td></td>
                <td></td>
                <td>
                  Halt program execution
                </td>
                <td><code>HLT</code></td>
              </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>

    <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
    <script src="//netdna.bootstrapcdn.com/bootstrap/3.0.0/js/bootstrap.min.js"></script>
  </body>
</html>
